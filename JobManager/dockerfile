FROM gradle:8.8-jdk21
WORKDIR /app

# Copy Gradle config
COPY build.gradle settings.gradle ./
COPY gradle ./gradle

# Copy source code
COPY src ./src

# Install inotify-tools for file watching
RUN apt-get update && apt-get install -y inotify-tools

# Expose port
EXPOSE 8080

# Entrypoint script for hot reload
COPY docker-entrypoint.sh /docker-entrypoint.sh
RUN chmod +x /docker-entrypoint.sh

ENTRYPOINT ["/docker-entrypoint.sh"]
